{"version":3,"sources":["components/Persons.js","components/PersonForm.js","components/Filter.js","components/Notification.js","services/phonebook.js","App.js","index.js"],"names":["Persons","persons","handleDelete","map","person","name","number","style","marginLeft","onClick","id","PersonForm","eventHandlers","handleSubmit","handleNameChange","handleNumberChange","value","newName","newNumber","onSubmit","marginBottom","onChange","Button","variant","color","type","Filter","filterText","handleFilterChange","Notification","notification","message","status","className","baseUrl","data","getAll","axios","get","then","response","create","newObject","post","update","put","deleteData","delete","App","useState","setPersons","filteredPersons","setFilteredPersons","setNewName","setNewNumber","setFilterText","val","handleNotification","notificationMessage","setNotificationMessage","handleNotificationMessage","pos","charAt","length","setTimeout","useEffect","phonebookService","initialPhonebook","deletePerson","text","window","confirm","filter","catch","error","alert","Container","event","target","toString","trim","splice","newPersons","toLowerCase","includes","preventDefault","find","p","newPerson","returnedPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f99015ef.chunk.js","sourcesContent":["const Persons = ({persons, handleDelete}) => {\r\n    return (\r\n        <div>\r\n           {\r\n               persons.map(person => {\r\n                   return (\r\n                       <p key={person.id}>\r\n                           {person.name} {person.number}\r\n                           <button style={{marginLeft: 10}} onClick={()=>handleDelete(person.id, person.name)}>\r\n                                Delete\r\n                           </button>\r\n                       </p>\r\n                   )\r\n               })\r\n           }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons;","import {Button} from '@material-ui/core'\r\nconst PersonForm = ({eventHandlers: {handleSubmit, handleNameChange, handleNumberChange}, \r\n                     value: {newName, newNumber}}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div style={{marginBottom: 10}}>\r\n                Name: <input value={newName} onChange={handleNameChange}/>\r\n            </div>\r\n            <div style={{marginBottom: 10}}>\r\n                Number: <input value={newNumber} onChange={handleNumberChange}/>\r\n            </div>\r\n            <div style={{marginBottom: 10}}>\r\n                <Button variant=\"contained\" color=\"primary\" type=\"submit\">add</Button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm;","const Filter = ({filterText, handleFilterChange}) => {\r\n    return (\r\n        <form>\r\n            <div>\r\n                Search: <input value={filterText} onChange={handleFilterChange}/>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Filter;","const Notification = ({ notification: {message, status } }) => {\r\n  return (\r\n    <div>\r\n      <h1 className={status}>{message}</h1>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification;","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deleteData = (id) => {\r\n    const request= axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response)\r\n}\r\n\r\nconst data = {getAll, create, update, deleteData}\r\n\r\nexport default data","import React, {useState, useEffect} from 'react'\r\n\r\nimport Persons from './components/Persons'\r\nimport PersonForm from './components/PersonForm'\r\nimport Filter from './components/Filter'\r\nimport Notification from './components/Notification'\r\n\r\nimport phonebookService from './services/phonebook'\r\n\r\nimport { Container } from '@material-ui/core'\r\n\r\nconst App = () => {\r\n    const [persons, setPersons] = useState([])\r\n    const [filteredPersons, setFilteredPersons] = useState([])\r\n\r\n    const [newName, setNewName] = useState('')\r\n    const [newNumber, setNewNumber] = useState('')\r\n    const [filterText, setFilterText] = useState('')\r\n\r\n    const [notificationMessage, setNotificationMessage] = useState({\r\n        message: null,\r\n        status: null,\r\n        val: null,\r\n        handleNotification: null\r\n    })\r\n\r\n    const handleNameChange = (event) => setNewName(event.target.value)\r\n    const handleNumberChange = (event) => setNewNumber(event.target.value)\r\n    \r\n    const handleFilterChange = (event) => {\r\n        setFilterText(event.target.value)\r\n\r\n        if(event.target.value.toString().trim() === ''){\r\n            setFilteredPersons(persons.splice())\r\n        } else {\r\n            const newPersons = persons.filter(person => person.name.toLowerCase().includes(event.target.value.toLowerCase()) === true)\r\n            setFilteredPersons(newPersons)\r\n        }\r\n    }\r\n\r\n    const handleNotificationMessage = (message, status) => {\r\n        if(status === 'added'){\r\n            setNotificationMessage({message: `${message} added`, status: 'success'})\r\n        }\r\n        else if(status==='modified'){\r\n            setNotificationMessage({message: `${message} modified`, status: 'success'})\r\n        }\r\n        else if(status === 'validation error'){\r\n            let pos = message.charAt(message.length -3)\r\n            if(pos === '8') {\r\n                setNotificationMessage({message: 'Number too short. Required at least 8 character long.', status:'error'})\r\n            }\r\n            else if (pos === '3') {\r\n                setNotificationMessage({message:'Name too short. Required at least 3 character long.', status:'error'})\r\n            }\r\n            else{\r\n                setNotificationMessage({message: message, status: 'error',})\r\n            }\r\n        }\r\n        else {\r\n            setNotificationMessage({message: `Information of ${message} has already been removed from server.`, status:'error'})\r\n        }\r\n\r\n        setTimeout(()=>{\r\n            setNotificationMessage({message: null, status: null})\r\n        }, 5000)\r\n    }\r\n\r\n    useEffect(() => {\r\n        phonebookService\r\n            .getAll()\r\n            .then(initialPhonebook => {\r\n                setPersons(initialPhonebook)\r\n            })\r\n    }, [])\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        if(newName.trim().length < 1){\r\n            alert('Name can not be empty')\r\n            return \r\n        }\r\n        if(newNumber.trim().length < 1){\r\n            alert('Number can not be empty')\r\n            return \r\n        }\r\n        \r\n        if(persons.filter(person => person.name === newName).length > 0){\r\n            var x = window.confirm(`${newName} already added to phonebook, replace the old number with a new one?`)\r\n            if(x) {\r\n                const person = persons.find(p => p.name === newName)\r\n                const newPerson = {...person, number: newNumber}\r\n\r\n                phonebookService\r\n                    .update(person.id, newPerson)\r\n                    .then(returnedPerson => {\r\n                        setPersons(persons.map(person => person.name !== newName? person: returnedPerson))\r\n                        handleNotificationMessage(returnedPerson.name, 'modified')\r\n                        setNewName('')\r\n                        setNewNumber('')\r\n                    })\r\n                    .catch(error => {\r\n                        handleNotificationMessage(person.name, 'not found')\r\n                    })\r\n            }\r\n            return\r\n        } \r\n        \r\n        else {\r\n            const newObject = {\r\n                name: newName.trim(),\r\n                number: newNumber.trim(),\r\n            }\r\n\r\n            phonebookService\r\n                .create(newObject)\r\n                .then(\r\n                    returnedPerson => {\r\n                        setPersons(persons.concat(returnedPerson))\r\n                        handleNotificationMessage(returnedPerson.name, 'added')\r\n                        setNewName('')\r\n                        setNewNumber('')  \r\n                    }\r\n                )\r\n                .catch(error => {\r\n                    handleNotificationMessage(error.response.data.error, 'validation error')\r\n                })\r\n        }\r\n               \r\n    }\r\n\r\n    const deletePerson = (id, text) => {\r\n        var result = window.confirm(`Delete ${text}?`)\r\n        if(result){\r\n           phonebookService\r\n            .deleteData(id)\r\n            .then(response => {\r\n                if(response.status === 204){\r\n                    setPersons(persons.filter(person => person.id !== id))\r\n                }\r\n            })\r\n            .catch(error=> {\r\n                alert(`the person of ${id} was already deleted from server.`)\r\n                setPersons(persons.filter(person => person.id !== id))\r\n            }) \r\n        }\r\n        return\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <h1>Phonebook 📱</h1>\r\n            <Notification notification={notificationMessage}/>\r\n            <Filter filterText={filterText} handleFilterChange={handleFilterChange}/>\r\n            <h1>Add 📝</h1>\r\n            <PersonForm\r\n                eventHandlers = {{handleSubmit, handleNameChange, handleNumberChange}}\r\n                value = {{newName, newNumber}}\r\n            />\r\n            <h1>Numbers 📔</h1>\r\n            {\r\n                filterText.trim() === '' ? <Persons persons={persons} handleDelete={(id, text)=> deletePerson(id, text)} />\r\n                    : <Persons persons={filteredPersons} handleDelete={(id, text) => deletePerson(id, text)}/>\r\n            } \r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default App;","import ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(<App/>, document.getElementById('root'))"],"sourceRoot":""}