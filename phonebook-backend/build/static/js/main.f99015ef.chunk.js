(this["webpackJsonpphonebook-frontend"]=this["webpackJsonpphonebook-frontend"]||[]).push([[0],{66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(13),r=n.n(a),c=n(22),o=n(12),i=n(0),u=n(2),s=function(e){var t=e.persons,n=e.handleDelete;return Object(u.jsx)("div",{children:t.map((function(e){return Object(u.jsxs)("p",{children:[e.name," ",e.number,Object(u.jsx)("button",{style:{marginLeft:10},onClick:function(){return n(e.id,e.name)},children:"Delete"})]},e.id)}))})},l=n(81),d=function(e){var t=e.eventHandlers,n=t.handleSubmit,a=t.handleNameChange,r=t.handleNumberChange,c=e.value,o=c.newName,i=c.newNumber;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{style:{marginBottom:10},children:["Name: ",Object(u.jsx)("input",{value:o,onChange:a})]}),Object(u.jsxs)("div",{style:{marginBottom:10},children:["Number: ",Object(u.jsx)("input",{value:i,onChange:r})]}),Object(u.jsx)("div",{style:{marginBottom:10},children:Object(u.jsx)(l.a,{variant:"contained",color:"primary",type:"submit",children:"add"})})]})},f=function(e){var t=e.filterText,n=e.handleFilterChange;return Object(u.jsx)("form",{children:Object(u.jsxs)("div",{children:["Search: ",Object(u.jsx)("input",{value:t,onChange:n})]})})},m=function(e){var t=e.notification,n=t.message,a=t.status;return Object(u.jsx)("div",{children:Object(u.jsx)("h1",{className:a,children:n})})},h=n(19),b=n.n(h),j="/api/persons",O={getAll:function(){return b.a.get(j).then((function(e){return e.data}))},create:function(e){return b.a.post(j,e).then((function(e){return e.data}))},update:function(e,t){return b.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))},deleteData:function(e){return b.a.delete("".concat(j,"/").concat(e)).then((function(e){return e}))}},g=n(80),v=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)([]),l=Object(o.a)(r,2),h=l[0],b=l[1],j=Object(i.useState)(""),v=Object(o.a)(j,2),p=v[0],x=v[1],N=Object(i.useState)(""),w=Object(o.a)(N,2),y=w[0],C=w[1],S=Object(i.useState)(""),D=Object(o.a)(S,2),k=D[0],A=D[1],B=Object(i.useState)({message:null,status:null,val:null,handleNotification:null}),L=Object(o.a)(B,2),T=L[0],q=L[1],E=function(e,t){if("added"===t)q({message:"".concat(e," added"),status:"success"});else if("modified"===t)q({message:"".concat(e," modified"),status:"success"});else if("validation error"===t){var n=e.charAt(e.length-3);q("8"===n?{message:"Number too short. Required at least 8 character long.",status:"error"}:"3"===n?{message:"Name too short. Required at least 3 character long.",status:"error"}:{message:e,status:"error"})}else q({message:"Information of ".concat(e," has already been removed from server."),status:"error"});setTimeout((function(){q({message:null,status:null})}),5e3)};Object(i.useEffect)((function(){O.getAll().then((function(e){a(e)}))}),[]);var F=function(e,t){window.confirm("Delete ".concat(t,"?"))&&O.deleteData(e).then((function(t){204===t.status&&a(n.filter((function(t){return t.id!==e})))})).catch((function(t){alert("the person of ".concat(e," was already deleted from server.")),a(n.filter((function(t){return t.id!==e})))}))};return Object(u.jsxs)(g.a,{children:[Object(u.jsx)("h1",{children:"Phonebook \ud83d\udcf1"}),Object(u.jsx)(m,{notification:T}),Object(u.jsx)(f,{filterText:k,handleFilterChange:function(e){if(A(e.target.value),""===e.target.value.toString().trim())b(n.splice());else{var t=n.filter((function(t){return!0===t.name.toLowerCase().includes(e.target.value.toLowerCase())}));b(t)}}}),Object(u.jsx)("h1",{children:"Add \ud83d\udcdd"}),Object(u.jsx)(d,{eventHandlers:{handleSubmit:function(e){if(e.preventDefault(),p.trim().length<1)alert("Name can not be empty");else if(y.trim().length<1)alert("Number can not be empty");else if(n.filter((function(e){return e.name===p})).length>0){if(window.confirm("".concat(p," already added to phonebook, replace the old number with a new one?"))){var t=n.find((function(e){return e.name===p})),r=Object(c.a)(Object(c.a)({},t),{},{number:y});O.update(t.id,r).then((function(e){a(n.map((function(t){return t.name!==p?t:e}))),E(e.name,"modified"),x(""),C("")})).catch((function(e){E(t.name,"not found")}))}}else{var o={name:p.trim(),number:y.trim()};O.create(o).then((function(e){a(n.concat(e)),E(e.name,"added"),x(""),C("")})).catch((function(e){E(e.response.data.error,"validation error")}))}},handleNameChange:function(e){return x(e.target.value)},handleNumberChange:function(e){return C(e.target.value)}},value:{newName:p,newNumber:y}}),Object(u.jsx)("h1",{children:"Numbers \ud83d\udcd4"}),""===k.trim()?Object(u.jsx)(s,{persons:n,handleDelete:function(e,t){return F(e,t)}}):Object(u.jsx)(s,{persons:h,handleDelete:function(e,t){return F(e,t)}})]})};n(66);r.a.render(Object(u.jsx)(v,{}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.f99015ef.chunk.js.map