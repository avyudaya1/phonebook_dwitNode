{"version":3,"sources":["components/Persons.js","components/PersonForm.js","components/Filter.js","components/Notification.js","services/phonebook.js","App.js","index.js"],"names":["Persons","persons","handleDelete","map","person","name","number","style","marginLeft","onClick","id","PersonForm","eventHandlers","handleSubmit","handleNameChange","handleNumberChange","value","newName","newNumber","onSubmit","marginBottom","onChange","type","Filter","filterText","handleFilterChange","Notification","notification","message","status","className","baseUrl","data","getAll","axios","get","then","response","create","newObject","post","update","put","deleteData","delete","App","useState","setPersons","filteredPersons","setFilteredPersons","setNewName","setNewNumber","setFilterText","notificationMessage","setNotificationMessage","handleNotificationMessage","setTimeout","useEffect","phonebookService","initialPhonebook","deletePerson","text","window","confirm","filter","catch","error","alert","event","target","toString","trim","splice","newPersons","toLowerCase","includes","preventDefault","length","find","p","newPerson","returnedPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c371e173.chunk.js","sourcesContent":["const Persons = ({persons, handleDelete}) => {\r\n    return (\r\n        <div>\r\n           {\r\n               persons.map(person => {\r\n                   return (\r\n                       <p key={person.id}>\r\n                           {person.name} {person.number}\r\n                           <button style={{marginLeft: 10}} onClick={()=>handleDelete(person.id, person.name)}>\r\n                                delete\r\n                           </button>\r\n                       </p>\r\n                   )\r\n               })\r\n           }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons;","const PersonForm = ({eventHandlers: {handleSubmit, handleNameChange, handleNumberChange}, \r\n                     value: {newName, newNumber}}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div style={{marginBottom: 10}}>\r\n                Name: <input value={newName} onChange={handleNameChange}/>\r\n            </div>\r\n            <div style={{marginBottom: 10}}>\r\n                Number: <input value={newNumber} onChange={handleNumberChange}/>\r\n            </div>\r\n            <div style={{marginBottom: 10}}>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm;","const Filter = ({filterText, handleFilterChange}) => {\r\n    return (\r\n        <form>\r\n            <div>\r\n                Search: <input value={filterText} onChange={handleFilterChange}/>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Filter;","const Notification = ({ notification: {message, status } }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className={status}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default Notification;","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deleteData = (id) => {\r\n    const request= axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response)\r\n}\r\n\r\nconst data = {getAll, create, update, deleteData}\r\n\r\nexport default data","import React, {useState, useEffect} from 'react'\r\n\r\nimport Persons from './components/Persons'\r\nimport PersonForm from './components/PersonForm'\r\nimport Filter from './components/Filter'\r\nimport Notification from './components/Notification'\r\n\r\nimport phonebookService from './services/phonebook'\r\n\r\nconst App = () => {\r\n    const [persons, setPersons] = useState([])\r\n    const [filteredPersons, setFilteredPersons] = useState([])\r\n\r\n    const [newName, setNewName] = useState('')\r\n    const [newNumber, setNewNumber] = useState('')\r\n    const [filterText, setFilterText] = useState('')\r\n\r\n    const [notificationMessage, setNotificationMessage] = useState({\r\n        message: null,\r\n        status: null\r\n    })\r\n\r\n    const handleNameChange = (event) => setNewName(event.target.value)\r\n    const handleNumberChange = (event) => setNewNumber(event.target.value)\r\n    \r\n    const handleFilterChange = (event) => {\r\n        setFilterText(event.target.value)\r\n\r\n        if(event.target.value.toString().trim() === ''){\r\n            setFilteredPersons(persons.splice())\r\n        } else {\r\n            const newPersons = persons.filter(person => person.name.toLowerCase().includes(event.target.value.toLowerCase()) === true)\r\n            setFilteredPersons(newPersons)\r\n        }\r\n    }\r\n\r\n    const handleNotificationMessage = (message, status) => {\r\n        if(status === 'added'){\r\n            setNotificationMessage({message: `${message} added`, status: 'success'})\r\n        }\r\n        else if(status==='modified'){\r\n            setNotificationMessage({message: `${message} modified`, status: 'success'})\r\n        }\r\n        else if(status === 'validation error'){\r\n            setNotificationMessage({message: message, status: 'error'})\r\n        }\r\n        else {\r\n            setNotificationMessage({message: `Information of ${message} has already been removed from server.`, status:'error'})\r\n        }\r\n\r\n        setTimeout(()=>{\r\n            setNotificationMessage({message: null, status: null})\r\n        }, 5000)\r\n    }\r\n\r\n    useEffect(() => {\r\n        phonebookService\r\n            .getAll()\r\n            .then(initialPhonebook => {\r\n                setPersons(initialPhonebook)\r\n            })\r\n    }, [])\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        if(newName.trim().length < 1){\r\n            alert('Name can not be empty')\r\n            return \r\n        }\r\n        if(newNumber.trim().length < 1){\r\n            alert('Number can not be empty')\r\n            return \r\n        }\r\n        \r\n        if(persons.filter(person => person.name === newName).length > 0){\r\n            var x = window.confirm(`${newName} already added to phonebook, replace the old number with a new one?`)\r\n            if(x) {\r\n                const person = persons.find(p => p.name === newName)\r\n                const newPerson = {...person, number: newNumber}\r\n\r\n                phonebookService\r\n                    .update(person.id, newPerson)\r\n                    .then(returnedPerson => {\r\n                        setPersons(persons.map(person => person.name !== newName? person: returnedPerson))\r\n                        handleNotificationMessage(returnedPerson.name, 'modified')\r\n                        setNewName('')\r\n                        setNewNumber('')\r\n                    })\r\n                    .catch(error => {\r\n                        handleNotificationMessage(person.name, 'not found')\r\n                    })\r\n            }\r\n            return\r\n        } \r\n        \r\n        else {\r\n            const newObject = {\r\n                name: newName.trim(),\r\n                number: newNumber.trim(),\r\n            }\r\n\r\n            phonebookService\r\n                .create(newObject)\r\n                .then(\r\n                    returnedPerson => {\r\n                        setPersons(persons.concat(returnedPerson))\r\n                        handleNotificationMessage(returnedPerson.name, 'added')\r\n                        setNewName('')\r\n                        setNewNumber('')  \r\n                    }\r\n                )\r\n                .catch(error => {\r\n                    handleNotificationMessage(error.response.data.error, 'validation error')\r\n                })\r\n        }\r\n               \r\n    }\r\n\r\n    const deletePerson = (id, text) => {\r\n        var result = window.confirm(`Delete ${text}?`)\r\n        if(result){\r\n           phonebookService\r\n            .deleteData(id)\r\n            .then(response => {\r\n                if(response.status === 204){\r\n                    setPersons(persons.filter(person => person.id !== id))\r\n                }\r\n            })\r\n            .catch(error=> {\r\n                alert(`the person of ${id} was already deleted from server.`)\r\n                setPersons(persons.filter(person => person.id !== id))\r\n            }) \r\n        }\r\n        return\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Phonebook 📱</h1>\r\n            <Notification notification={notificationMessage}/>\r\n            <Filter filterText={filterText} handleFilterChange={handleFilterChange}/>\r\n            <h1>Add 😎</h1>\r\n            <PersonForm\r\n                eventHandlers = {{handleSubmit, handleNameChange, handleNumberChange}}\r\n                value = {{newName, newNumber}}\r\n            />\r\n            <h1>Numbers 🙎</h1>\r\n            {\r\n                filterText.trim() === '' ? <Persons persons={persons} handleDelete={(id, text)=> deletePerson(id, text)} />\r\n                    : <Persons persons={filteredPersons} handleDelete={(id, text) => deletePerson(id, text)}/>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App;","import ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(<App/>, document.getElementById('root'))"],"sourceRoot":""}