(this["webpackJsonpphonebook-frontend"]=this["webpackJsonpphonebook-frontend"]||[]).push([[0],{78:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(12),r=n.n(a),c=n(25),i=n(15),o=n(0),s=n(2),u=function(e){var t=e.persons,n=e.handleDelete;return Object(s.jsx)("div",{children:t.map((function(e){return Object(s.jsxs)("p",{children:[e.name," ",e.number,Object(s.jsx)("button",{style:{marginLeft:10},onClick:function(){return n(e.id,e.name)},children:"Delete"})]},e.id)}))})},l=n(99),d=function(e){var t=e.eventHandlers,n=t.handleSubmit,a=t.handleNameChange,r=t.handleNumberChange,c=e.value,i=c.newName,o=c.newNumber;return Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{style:{marginBottom:10},children:["Name: ",Object(s.jsx)("input",{value:i,onChange:a})]}),Object(s.jsxs)("div",{style:{marginBottom:10},children:["Number: ",Object(s.jsx)("input",{value:o,onChange:r})]}),Object(s.jsx)("div",{style:{marginBottom:10},children:Object(s.jsx)(l.a,{variant:"contained",color:"primary",type:"submit",children:"add"})})]})},f=function(e){var t=e.filterText,n=e.handleFilterChange;return Object(s.jsx)("form",{children:Object(s.jsxs)("div",{children:["Search: ",Object(s.jsx)("input",{value:t,onChange:n})]})})},m=n(103),j=n(104);function h(e){return Object(s.jsx)(j.a,Object(c.a)({elevation:6,variant:"filled"},e))}var b=function(e){var t=e.notification,n=t.message,a=t.status,r=Object(o.useState)(!0),c=Object(i.a)(r,2),u=c[0],l=c[1],d=function(e,t){"clickaway"!==t&&l(!1)};return null===n?null:Object(s.jsx)(m.a,{open:u,autoHideDuration:5e3,onClose:d,children:Object(s.jsx)(h,{onClose:d,severity:a,children:n})})},O=n(26),g=n.n(O),p="/api/persons",v={getAll:function(){return g.a.get(p).then((function(e){return e.data}))},create:function(e){return g.a.post(p,e).then((function(e){return e.data}))},update:function(e,t){return g.a.put("".concat(p,"/").concat(e),t).then((function(e){return e.data}))},deleteData:function(e){return g.a.delete("".concat(p,"/").concat(e)).then((function(e){return e}))}},x=n(102),y=function(){var e=Object(o.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)([]),l=Object(i.a)(r,2),m=l[0],j=l[1],h=Object(o.useState)(""),O=Object(i.a)(h,2),g=O[0],p=O[1],y=Object(o.useState)(""),w=Object(i.a)(y,2),C=w[0],N=w[1],S=Object(o.useState)(""),k=Object(i.a)(S,2),D=k[0],A=k[1],T=Object(o.useState)({message:null,status:null,val:null,handleNotification:null}),B=Object(i.a)(T,2),I=B[0],F=B[1],H=function(e,t){if("added"===t)F({message:"".concat(e," added"),status:"success"});else if("modified"===t)F({message:"".concat(e," modified"),status:"success"});else if("validation error"===t){var n=e.charAt(e.length-3);F("8"===n?{message:"Number too short. Required at least 8 character long.",status:"error"}:"3"===n?{message:"Name too short. Required at least 3 character long.",status:"error"}:{message:e,status:"error"})}else F({message:"Information of ".concat(e," has already been removed from server."),status:"error"});setTimeout((function(){F({message:null,status:null})}),5e3)};Object(o.useEffect)((function(){v.getAll().then((function(e){a(e)}))}),[]);var L=function(e,t){window.confirm("Delete ".concat(t,"?"))&&v.deleteData(e).then((function(t){204===t.status&&a(n.filter((function(t){return t.id!==e})))})).catch((function(t){alert("the person of ".concat(e," was already deleted from server.")),a(n.filter((function(t){return t.id!==e})))}))};return Object(s.jsxs)(x.a,{item:!0,xs:12,children:[Object(s.jsxs)(x.a,{container:!0,justify:"center",spacing:2,children:[Object(s.jsx)(x.a,{style:{display:"flex",alignItems:"start",justifyContent:"center",marginTop:30},item:!0,children:Object(s.jsx)("img",{height:"70%",src:"https://media.giphy.com/media/l4FAUfcxoAWOzSkko/giphy.gif",alt:"phonebook"})}),Object(s.jsxs)(x.a,{item:!0,children:[Object(s.jsx)("h1",{children:"Phonebook \ud83d\udcf1"}),Object(s.jsx)(b,{notification:I}),Object(s.jsx)(f,{filterText:D,handleFilterChange:function(e){if(A(e.target.value),""===e.target.value.toString().trim())j(n.splice());else{var t=n.filter((function(t){return!0===t.name.toLowerCase().includes(e.target.value.toLowerCase())}));j(t)}}}),Object(s.jsx)("h1",{children:"Add \ud83d\ude0e"}),Object(s.jsx)(d,{eventHandlers:{handleSubmit:function(e){if(e.preventDefault(),g.trim().length<1)alert("Name can not be empty");else if(C.trim().length<1)alert("Number can not be empty");else if(n.filter((function(e){return e.name===g})).length>0){if(window.confirm("".concat(g," already added to phonebook, replace the old number with a new one?"))){var t=n.find((function(e){return e.name===g})),r=Object(c.a)(Object(c.a)({},t),{},{number:C});v.update(t.id,r).then((function(e){a(n.map((function(t){return t.name!==g?t:e}))),H(e.name,"modified"),p(""),N("")})).catch((function(e){H(t.name,"not found")}))}}else{var i={name:g.trim(),number:C.trim()};v.create(i).then((function(e){a(n.concat(e)),H(e.name,"added"),p(""),N("")})).catch((function(e){H(e.response.data.error,"validation error")}))}},handleNameChange:function(e){return p(e.target.value)},handleNumberChange:function(e){return N(e.target.value)}},value:{newName:g,newNumber:C}})]})]}),Object(s.jsx)("h1",{style:{display:"flex",alignItems:"start",justifyContent:"center",marginTop:30},children:"Numbers \ud83d\ude4e"}),Object(s.jsx)(x.a,{container:!0,justify:"center",children:""===D.trim()?Object(s.jsx)(u,{persons:n,handleDelete:function(e,t){return L(e,t)}}):Object(s.jsx)(u,{persons:m,handleDelete:function(e,t){return L(e,t)}})})]})};n(78);r.a.render(Object(s.jsx)(y,{}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.abf1c570.chunk.js.map